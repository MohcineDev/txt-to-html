<!DOCTYPE html>

<html>

<head>
    <title>txt to html</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./w4.css">
</head>

<body>
    <nav>
        <div class="">
            <div class="links">
                <a href="/index.html">TXT to HTML</a>
                <a href="https://mohcinedev.github.io/bucket/" target="_blank">Generate Bucket</a>
                <a href="/ipTools.html">IP Tools</a>
                <a href="/w4.html">w4</a>
            </div>
        </div>
    </nav>
    <section>
        <textarea name="" id="" cols="30" rows="10"></textarea>
        <button>Generate</button>
        <button class="generate2">Generate 71 / 41</button>
        <button class="fill">fill table</button>
        <table>
            <tr>
                <th>deploy id</th>
                <th>entity id</th>
                <th>nbr lead</th>
            </tr>
            <tr>

            </tr>
        </table>
    </section>
    <script>
        const generate2 = document.querySelector('.generate2')
        const tableBtn = document.querySelector('.fill')
        const table = document.querySelector('table')

        let targetColumn = []

        document.querySelector('button').addEventListener('click', () => {
            console.log('123')
            let data = document.querySelector('textarea').value.split('\n')

            console.log(document.querySelector('textarea').value.split('\n')[8].split(' '))
            console.log(document.querySelector('textarea').value.split('\n')[8].split(' ')[26])
            console.log(document.querySelector('textarea').value.split('\n')[8].split(' ')[26].split('\t'))
            console.log(document.querySelector('textarea').value.split('\n')[8].split(' ')[26].split('\t')[1])

            targetColumn = []
            for (let i = 8; i < data.length - 1; i++) {
                targetColumn.push(data[i].split(' ')[26].split('\t')[1])
            }

            console.log(targetColumn)
        })
        generate2.addEventListener('click', generate7141)
        let array7141 = []
        function generate7141() {


            targetColumn.forEach(elem => {
                let deploy = {
                    deployId: null,
                    entityId: null
                }

                if (elem.substr(-2, 2) == "71" || elem.substr(-2, 2) == "41") {
            console.log('generate7141')

                    deploy.deployId = elem.substr(elem.search('_') + 1, 8)
                    deploy.entityId = elem.substr(-2, 2)
                    array7141.push(deploy)
                }
            });

        }



        tableBtn.addEventListener('click', fillTable)

        function fillTable() {
            array7141.forEach(elem => {
                let tr = document.createElement('tr')
                let entityIdTd = document.createElement('td')
                let deployIdTd = document.createElement('td')

                entityIdTd.textContent = elem.entityId
                deployIdTd.textContent = elem.deployId

                tr.appendChild(entityIdTd)
                tr.appendChild(deployIdTd)

                table.appendChild(tr)

            })
        }
    </script>
</body>

</html>